<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 9 - Control Services and Daemons - College of DuPage</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .instructor-info {
            background: white;
            padding: 1rem;
            margin: 1rem auto;
            max-width: 1200px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section {
            background: white;
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: #1e3c72;
            border-bottom: 3px solid #2a5298;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        .section h3 {
            color: #2a5298;
            margin: 1.5rem 0 1rem 0;
            font-size: 1.3rem;
        }

        .command-box {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            position: relative;
        }

        .command-box .command {
            color: #d73502;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .command-box .description {
            color: #666;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin-top: 0.5rem;
        }

        .example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 5px;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .example .prompt {
            color: #68d391;
        }

        .example .output {
            color: #e2e8f0;
            margin-left: 0;
        }

        .practice-questions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .practice-questions h3 {
            color: #856404;
            margin-bottom: 1rem;
        }

        .highlight {
            background: #fff3cd;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-weight: bold;
        }

        .question-container {
            margin: 1rem 0;
        }

        .question-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .answer-input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            transition: border-color 0.3s;
        }

        .answer-input:focus {
            outline: none;
            border-color: #2a5298;
        }

        .check-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            margin-right: 1rem;
            transition: background-color 0.3s;
        }

        .check-btn:hover {
            background: #218838;
        }

        .feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }

        .show-answer-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .show-answer-btn:hover {
            background: #5a6268;
        }

        .correct-answer {
            background: #d1ecf1;
            color: #0c5460;
            padding: 0.8rem;
            border-radius: 5px;
            margin-top: 0.5rem;
            font-family: 'Courier New', monospace;
            border-left: 4px solid #17a2b8;
        }

        .score-section {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .score-section h3 {
            color: #2e7d32;
            margin-bottom: 1rem;
        }

        #scoreDisplay {
            font-size: 1.2rem;
            margin: 1rem 0;
        }

        #scoreDisplay span {
            font-weight: bold;
            color: #2e7d32;
        }

        .reset-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 1rem;
        }

        .reset-btn:hover {
            background: #c82333;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .info-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .info-box h4 {
            color: #000000;
            margin-bottom: 0.5rem;
        }

        .info-box p {
            color: #000000;
        }

        .warning-box {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #dc3545;
        }

        .warning-box h4 {
            color: #000000;
            margin-bottom: 0.5rem;
        }

        .warning-box p {
            color: #000000;
        }

        .service-states {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .state-item {
            display: inline-block;
            background: #e9ecef;
            border: 1px solid #6c757d;
            border-radius: 3px;
            padding: 0.3rem 0.6rem;
            margin: 0.2rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .reset-note {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            color: #721c24;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">College of DuPage</div>
        <h1>Linux Commands Review</h1>
        <div class="subtitle">Chapter 9. Control Services and Daemons</div>
        <div class="subtitle">CIT Department - Computer Information Technology</div>
    </div>

    <div class="instructor-info">
        <h3>Instructor: Tony Chen</h3>
        <p>CIT Department | College of DuPage | cod.edu</p>
    </div>

    <div class="container">
        <section class="section">
            <h2>Understanding systemd and systemctl</h2>
            
            <h3>Introduction to systemd</h3>
            <p>systemd is the modern service management system for Linux. It provides:</p>
            <ul style="margin: 1rem 0; padding-left: 2rem;">
                <li><strong>Service Management:</strong> Start, stop, restart, and monitor services</li>
                <li><strong>Boot Process:</strong> Controls system startup and service dependencies</li>
                <li><strong>Units:</strong> Manages different types of resources (services, mounts, timers)</li>
                <li><strong>Parallel Processing:</strong> Services start in parallel for faster boot times</li>
                <li><strong>Logging:</strong> Centralized logging with journald</li>
            </ul>

            <div class="info-box">
                <h4>systemd Unit Types</h4>
                <p><strong>Service (.service):</strong> System services and daemons<br>
                <strong>Socket (.socket):</strong> Network sockets and IPC<br>
                <strong>Target (.target):</strong> Groups of units (like runlevels)<br>
                <strong>Mount (.mount):</strong> Filesystem mount points<br>
                <strong>Timer (.timer):</strong> Scheduled tasks (like cron)<br>
                <strong>Device (.device):</strong> Hardware devices</p>
            </div>

            <h3>Service States</h3>
            <p>systemd services can be in various states:</p>
            
            <div class="service-states">
                <div class="state-item">active (running)</div>
                <div class="state-item">active (exited)</div>
                <div class="state-item">inactive (dead)</div>
                <div class="state-item">failed</div>
                <div class="state-item">activating</div>
                <div class="state-item">deactivating</div>
            </div>

            <div class="info-box">
                <h4>Service State Details</h4>
                <p><strong>active (running):</strong> Service is currently running<br>
                <strong>active (exited):</strong> Service completed successfully<br>
                <strong>inactive (dead):</strong> Service is stopped<br>
                <strong>failed:</strong> Service failed to start or crashed<br>
                <strong>activating:</strong> Service is in the process of starting<br>
                <strong>deactivating:</strong> Service is in the process of stopping</p>
            </div>
        </section>

        <section class="section">
            <h2>Exploring System State with systemctl</h2>
            
            <h3>Use the systemctl command to explore the system's current state</h3>
            <div class="command-box">
                <div class="command">systemctl</div>
                <div class="description">List all loaded units and their states</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl</div>
                <div class="output">UNIT                               LOAD   ACTIVE SUB       DESCRIPTION<br>
proc-sys-fs-binfmt_misc.automount  loaded active waiting   Arbitrary Executable File Formats<br>
sys-devices-pci0000:00-0000:00:02.device loaded active plugged   GDM Display Manager<br>
sys-devices-platform-serial8250.device loaded active plugged   /sys/devices/platform/serial8250<br>
-.mount                            loaded active mounted   Root Mount<br>
boot.mount                         loaded active mounted   /boot<br>
dev-hugepages.mount                loaded active mounted   Huge Pages File System<br>
NetworkManager.service             loaded active running   Network Manager<br>
systemd-journald.service           loaded active running   Journal Service</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl list-units</div>
                <div class="description">List all active units</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl list-units</div>
                <div class="output">[Same output as systemctl - shows all loaded units]</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl list-units --type=service</div>
                <div class="description">List only service units</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl list-units --type=service</div>
                <div class="output">UNIT                     LOAD   ACTIVE SUB     DESCRIPTION<br>
NetworkManager.service   loaded active running Network Manager<br>
crond.service            loaded active running Command Scheduler<br>
httpd.service            loaded active running The Apache HTTP Server<br>
sshd.service             loaded active running OpenSSH server daemon<br>
systemd-journald.service loaded active running Journal Service</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl list-units --state=failed</div>
                <div class="description">List failed units</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl list-units --state=failed</div>
                <div class="output">UNIT                LOAD   ACTIVE SUB    DESCRIPTION<br>
backup.service      loaded failed failed Daily Backup Service<br>
network.service     loaded failed failed Network Service</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl list-unit-files</div>
                <div class="description">List all unit files and their enable status</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl list-unit-files --type=service</div>
                <div class="output">UNIT FILE                    STATE<br>
NetworkManager.service       enabled<br>
crond.service                enabled<br>
httpd.service                disabled<br>
sshd.service                 enabled<br>
bluetooth.service            disabled</div>
            </div>
        </section>

        <section class="section">
            <h2>Viewing Unit Status</h2>
            
            <h3>View a unit's status with the systemctl status</h3>
            <div class="command-box">
                <div class="command">systemctl status unit-name</div>
                <div class="description">Display detailed status of a specific unit</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl status httpd</div>
                <div class="output">● httpd.service - The Apache HTTP Server<br>
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)<br>
   Active: active (running) since Mon 2025-07-11 10:30:15 EDT; 2h 15min ago<br>
     Docs: man:httpd.service(8)<br>
 Main PID: 12345 (httpd)<br>
   Status: "Total requests: 0; Idle/Busy workers 100/0;Requests/sec: 0; Bytes served/sec:   0 B/sec"<br>
    Tasks: 213 (limit: 4915)<br>
   Memory: 25.2M<br>
   CGroup: /system.slice/httpd.service<br>
           ├─12345 /usr/sbin/httpd -DFOREGROUND<br>
           ├─12346 /usr/sbin/httpd -DFOREGROUND<br>
           └─12347 /usr/sbin/httpd -DFOREGROUND<br>
<br>
Jul 11 10:30:15 server systemd[1]: Starting The Apache HTTP Server...<br>
Jul 11 10:30:15 server httpd[12345]: Server configured, listening on: port 80<br>
Jul 11 10:30:15 server systemd[1]: Started The Apache HTTP Server.</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl status</div>
                <div class="description">Show overall system status</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl status</div>
                <div class="output">● server.cod.edu<br>
    State: running<br>
     Jobs: 0 queued<br>
   Failed: 2 units<br>
    Since: Mon 2025-07-09 08:00:00 EDT; 2 days ago<br>
   CGroup: /<br>
           ├─user.slice<br>
           ├─system.slice<br>
           └─init.scope</div>
            </div>

            <h3>Verify the Status of a Service</h3>
            <div class="command-box">
                <div class="command">systemctl is-active unit-name</div>
                <div class="description">Check if service is currently active</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl is-active httpd</div>
                <div class="output">active</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl is-enabled unit-name</div>
                <div class="description">Check if service is enabled to start at boot</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl is-enabled httpd</div>
                <div class="output">disabled</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl is-failed unit-name</div>
                <div class="description">Check if service is in failed state</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl is-failed sshd</div>
                <div class="output">active</div>
            </div>
        </section>

        <section class="section">
            <h2>Starting and Stopping Services</h2>
            
            <h3>Start and Stop Services</h3>
            <div class="command-box">
                <div class="command">systemctl start unit-name</div>
                <div class="description">Start a service immediately</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl start httpd</div>
                <div class="prompt"># systemctl status httpd</div>
                <div class="output">● httpd.service - The Apache HTTP Server<br>
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)<br>
   Active: active (running) since Mon 2025-07-11 12:45:30 EDT; 5s ago</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl stop unit-name</div>
                <div class="description">Stop a running service</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl stop httpd</div>
                <div class="prompt"># systemctl status httpd</div>
                <div class="output">● httpd.service - The Apache HTTP Server<br>
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)<br>
   Active: inactive (dead) since Mon 2025-07-11 12:46:15 EDT; 2s ago</div>
            </div>

            <h3>Restart and Reload Services</h3>
            <div class="command-box">
                <div class="command">systemctl restart unit-name</div>
                <div class="description">Stop and then start a service</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl restart httpd</div>
                <div class="prompt"># systemctl status httpd</div>
                <div class="output">● httpd.service - The Apache HTTP Server<br>
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)<br>
   Active: active (running) since Mon 2025-07-11 12:47:00 EDT; 3s ago<br>
 Main PID: 23456 (httpd)</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl reload unit-name</div>
                <div class="description">Reload service configuration without stopping</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl reload httpd</div>
                <div class="prompt"># systemctl status httpd</div>
                <div class="output">● httpd.service - The Apache HTTP Server<br>
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)<br>
   Active: active (running) since Mon 2025-07-11 12:47:00 EDT; 1min ago<br>
 Main PID: 23456 (httpd)</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl reload-or-restart unit-name</div>
                <div class="description">Reload if possible, otherwise restart</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl reload-or-restart httpd</div>
                <div class="output">[Reloads configuration or restarts if reload not supported]</div>
            </div>

            <div class="info-box">
                <h4>Restart vs Reload</h4>
                <p><strong>Restart:</strong> Completely stops and starts the service (new PID)<br>
                <strong>Reload:</strong> Reloads configuration without stopping (same PID)<br>
                <strong>Use reload when:</strong> You only changed configuration files<br>
                <strong>Use restart when:</strong> You updated the service binary or need a clean start</p>
            </div>
        </section>

        <section class="section">
            <h2>Managing Service Dependencies</h2>
            
            <h3>List Unit Dependencies</h3>
            <div class="command-box">
                <div class="command">systemctl list-dependencies unit-name</div>
                <div class="description">Show dependencies for a unit</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl list-dependencies httpd</div>
                <div class="output">httpd.service<br>
● ├─httpd-init.service<br>
● ├─system.slice<br>
● └─basic.target<br>
●   ├─microcode.service<br>
●   ├─rhel-autorelabel.service<br>
●   ├─selinux-autorelabel.service<br>
●   ├─paths.target<br>
●   ├─slices.target<br>
●   ├─sockets.target<br>
●   ├─sysinit.target</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl list-dependencies --reverse unit-name</div>
                <div class="description">Show what depends on this unit</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl list-dependencies --reverse network.target</div>
                <div class="output">network.target<br>
● └─multi-user.target<br>
●   └─graphical.target</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl list-dependencies --all unit-name</div>
                <div class="description">Show all dependencies recursively</div>
            </div>
            <div class="example">
                <div class="prompt">$ systemctl list-dependencies --all sshd</div>
                <div class="output">[Shows complete dependency tree including all levels]</div>
            </div>
        </section>

        <section class="section">
            <h2>Advanced Service Management</h2>
            
            <h3>Mask and Unmask Services</h3>
            <div class="command-box">
                <div class="command">systemctl mask unit-name</div>
                <div class="description">Prevent service from being started (links to /dev/null)</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl mask bluetooth</div>
                <div class="output">Created symlink /etc/systemd/system/bluetooth.service → /dev/null.</div>
                <div class="prompt"># systemctl start bluetooth</div>
                <div class="output">Failed to start bluetooth.service: Unit bluetooth.service is masked.</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl unmask unit-name</div>
                <div class="description">Remove mask and allow service to be started</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl unmask bluetooth</div>
                <div class="output">Removed /etc/systemd/system/bluetooth.service.</div>
                <div class="prompt"># systemctl start bluetooth</div>
                <div class="output">[Service starts successfully]</div>
            </div>

            <div class="warning-box">
                <h4>⚠️ Warning</h4>
                <p>Masking a service completely prevents it from starting, even as a dependency of other services. Use carefully and only when you're certain the service should never run.</p>
            </div>

            <h3>Enable Services to Start or Stop at Boot</h3>
            <div class="command-box">
                <div class="command">systemctl enable unit-name</div>
                <div class="description">Enable service to start automatically at boot</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl enable httpd</div>
                <div class="output">Created symlink /etc/systemd/system/multi-user.target.wants/httpd.service → /usr/lib/systemd/system/httpd.service.</div>
                <div class="prompt"># systemctl is-enabled httpd</div>
                <div class="output">enabled</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl disable unit-name</div>
                <div class="description">Disable service from starting at boot</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl disable httpd</div>
                <div class="output">Removed /etc/systemd/system/multi-user.target.wants/httpd.service.</div>
                <div class="prompt"># systemctl is-enabled httpd</div>
                <div class="output">disabled</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl enable --now unit-name</div>
                <div class="description">Enable and start service immediately</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl enable --now httpd</div>
                <div class="output">Created symlink /etc/systemd/system/multi-user.target.wants/httpd.service → /usr/lib/systemd/system/httpd.service.</div>
                <div class="prompt"># systemctl status httpd</div>
                <div class="output">● httpd.service - The Apache HTTP Server<br>
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)<br>
   Active: active (running) since Mon 2025-07-11 13:00:00 EDT; 5s ago</div>
            </div>

            <div class="command-box">
                <div class="command">systemctl disable --now unit-name</div>
                <div class="description">Disable and stop service immediately</div>
            </div>
            <div class="example">
                <div class="prompt"># systemctl disable --now bluetooth</div>
                <div class="output">Removed /etc/systemd/system/dbus-org.bluez.service.<br>
Removed /etc/systemd/system/bluetooth.target.wants/bluetooth.service.</div>
            </div>

            <div class="info-box">
                <h4>Enable vs Start</h4>
                <p><strong>Enable:</strong> Configures service to start at boot (persistent)<br>
                <strong>Start:</strong> Starts service now (temporary until reboot)<br>
                <strong>Best Practice:</strong> Use "enable --now" to both enable and start<br>
                <strong>Common Workflow:</strong> enable → start → verify status</p>
            </div>
        </section>

        <section class="section">
            <h2>Practice Questions</h2>
            
            <div class="reset-note">
                <strong>Note:</strong> If "Reset All Answers" doesn't work, please refresh and reload the page.
            </div>
            
            <div class="practice-questions">
                <h3>Review Questions</h3>
                <div class="question-container">
                    <div class="question-item">
                        <p><strong>1.</strong> What command shows the detailed status of a specific service?</p>
                        <input type="text" id="q1" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(1, 'systemctl status')" class="check-btn">Check Answer</button>
                        <div id="feedback1" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>2.</strong> What command starts a service immediately?</p>
                        <input type="text" id="q2" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(2, 'systemctl start')" class="check-btn">Check Answer</button>
                        <div id="feedback2" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>3.</strong> What command enables a service to start automatically at boot?</p>
                        <input type="text" id="q3" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(3, 'systemctl enable')" class="check-btn">Check Answer</button>
                        <div id="feedback3" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>4.</strong> What command reloads a service's configuration without stopping it?</p>
                        <input type="text" id="q4" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(4, 'systemctl reload')" class="check-btn">Check Answer</button>
                        <div id="feedback4" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>5.</strong> What command prevents a service from being started?</p>
                        <input type="text" id="q5" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(5, 'systemctl mask')" class="check-btn">Check Answer</button>
                        <div id="feedback5" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>6.</strong> What command lists only failed units?</p>
                        <input type="text" id="q6" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(6, 'systemctl list-units --state=failed')" class="check-btn">Check Answer</button>
                        <div id="feedback6" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>7.</strong> What command shows dependencies for a unit?</p>
                        <input type="text" id="q7" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(7, 'systemctl list-dependencies')" class="check-btn">Check Answer</button>
                        <div id="feedback7" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>8.</strong> What command checks if a service is currently active?</p>
                        <input type="text" id="q8" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(8, 'systemctl is-active')" class="check-btn">Check Answer</button>
                        <div id="feedback8" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>9.</strong> What command stops and then starts a service?</p>
                        <input type="text" id="q9" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(9, 'systemctl restart')" class="check-btn">Check Answer</button>
                        <div id="feedback9" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>10.</strong> What command lists all service units?</p>
                        <input type="text" id="q10" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkAnswer(10, 'systemctl list-units --type=service')" class="check-btn">Check Answer</button>
                        <div id="feedback10" class="feedback"></div>
                    </div>
                </div>
            </div>

            <div class="practice-questions">
                <h3>Command Practice Scenarios</h3>
                <div class="question-container">
                    <div class="question-item">
                        <p><strong>Scenario 1:</strong> You want to enable the httpd service to start at boot and also start it immediately. What single command can do both?</p>
                        <input type="text" id="s1" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkScenario(1, 'systemctl enable --now httpd')" class="check-btn">Check Answer</button>
                        <div id="sfeedback1" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>Scenario 2:</strong> The Apache web server configuration was changed. You want to apply the changes without stopping the service. What command do you use?</p>
                        <input type="text" id="s2" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkScenario(2, 'systemctl reload httpd')" class="check-btn">Check Answer</button>
                        <div id="sfeedback2" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>Scenario 3:</strong> You want to permanently prevent the bluetooth service from starting. What command do you use?</p>
                        <input type="text" id="s3" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkScenario(3, 'systemctl mask bluetooth')" class="check-btn">Check Answer</button>
                        <div id="sfeedback3" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>Scenario 4:</strong> You need to see what services have failed to start. What command shows only failed units?</p>
                        <input type="text" id="s4" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkScenario(4, 'systemctl list-units --state=failed')" class="check-btn">Check Answer</button>
                        <div id="sfeedback4" class="feedback"></div>
                    </div>

                    <div class="question-item">
                        <p><strong>Scenario 5:</strong> You want to check if the sshd service is enabled to start at boot. What command do you use?</p>
                        <input type="text" id="s5" placeholder="Enter your answer..." class="answer-input">
                        <button onclick="checkScenario(5, 'systemctl is-enabled sshd')" class="check-btn">Check Answer</button>
                        <div id="sfeedback5" class="feedback"></div>
                    </div>
                </div>
            </div>

            <div class="score-section">
                <h3>Your Progress</h3>
                <div id="scoreDisplay">
                    <p>Review Questions: <span id="reviewScore">0/10</span></p>
                    <p>Scenario Questions: <span id="scenarioScore">0/5</span></p>
                    <p>Total Score: <span id="totalScore">0/15</span></p>
                </div>
                <button onclick="resetQuiz()" class="reset-btn">Reset All Answers</button>
            </div>
        </section>
    </div>

    <script>
        // Score tracking
        let reviewCorrect = 0;
        let scenarioCorrect = 0;
        let reviewAttempted = new Set();
        let scenarioAttempted = new Set();

        // Alternative answers for flexible checking
        const alternatives = {
            1: ['systemctl status'],
            2: ['systemctl start'],
            3: ['systemctl enable'],
            4: ['systemctl reload'],
            5: ['systemctl mask'],
            6: ['systemctl list-units --state=failed', 'systemctl --state=failed'],
            7: ['systemctl list-dependencies'],
            8: ['systemctl is-active'],
            9: ['systemctl restart'],
            10: ['systemctl list-units --type=service', 'systemctl --type=service']
        };

        const scenarioAlternatives = {
            1: ['systemctl enable --now httpd', 'systemctl --now enable httpd'],
            2: ['systemctl reload httpd'],
            3: ['systemctl mask bluetooth'],
            4: ['systemctl list-units --state=failed', 'systemctl --state=failed'],
            5: ['systemctl is-enabled sshd']
        };

        function normalizeAnswer(answer) {
            return answer.toLowerCase().trim().replace(/\s+/g, ' ');
        }

        function checkAnswer(questionNum, correctAnswer) {
            const userAnswer = document.getElementById(`q${questionNum}`).value;
            const feedbackElement = document.getElementById(`feedback${questionNum}`);
            const normalizedUser = normalizeAnswer(userAnswer);
            const normalizedCorrect = normalizeAnswer(correctAnswer);
            
            // Check if answer matches any alternative
            let isCorrect = normalizedUser === normalizedCorrect;
            if (!isCorrect && alternatives[questionNum]) {
                isCorrect = alternatives[questionNum].some(alt => normalizeAnswer(alt) === normalizedUser);
            }
            
            if (isCorrect) {
                feedbackElement.className = 'feedback correct';
                feedbackElement.innerHTML = '✓ Correct! Well done!';
                if (!reviewAttempted.has(questionNum)) {
                    reviewCorrect++;
                    reviewAttempted.add(questionNum);
                }
            } else {
                feedbackElement.className = 'feedback incorrect';
                feedbackElement.innerHTML = `
                    ✗ Incorrect. Try again!
                    <button class="show-answer-btn" onclick="showCorrectAnswer(${questionNum}, '${correctAnswer}')">
                        Show Correct Answer
                    </button>
                `;
                if (!reviewAttempted.has(questionNum)) {
                    reviewAttempted.add(questionNum);
                }
            }
            
            updateScore();
        }

        function checkScenario(scenarioNum, correctAnswer) {
            const userAnswer = document.getElementById(`s${scenarioNum}`).value;
            const feedbackElement = document.getElementById(`sfeedback${scenarioNum}`);
            const normalizedUser = normalizeAnswer(userAnswer);
            const normalizedCorrect = normalizeAnswer(correctAnswer);
            
            // Check if answer matches any alternative
            let isCorrect = normalizedUser === normalizedCorrect;
            if (!isCorrect && scenarioAlternatives[scenarioNum]) {
                isCorrect = scenarioAlternatives[scenarioNum].some(alt => normalizeAnswer(alt) === normalizedUser);
            }
            
            if (isCorrect) {
                feedbackElement.className = 'feedback correct';
                feedbackElement.innerHTML = '✓ Correct! Excellent problem-solving!';
                if (!scenarioAttempted.has(scenarioNum)) {
                    scenarioCorrect++;
                    scenarioAttempted.add(scenarioNum);
                }
            } else {
                feedbackElement.className = 'feedback incorrect';
                feedbackElement.innerHTML = `
                    ✗ Incorrect. Think about the scenario again.
                    <button class="show-answer-btn" onclick="showScenarioAnswer(${scenarioNum}, '${correctAnswer}')">
                        Show Correct Answer
                    </button>
                `;
                if (!scenarioAttempted.has(scenarioNum)) {
                    scenarioAttempted.add(scenarioNum);
                }
            }
            
            updateScore();
        }

        function showCorrectAnswer(questionNum, correctAnswer) {
            const feedbackElement = document.getElementById(`feedback${questionNum}`);
            const explanations = {
                1: 'The "systemctl status" command shows detailed information about a service including its current state, recent log entries, and process information.',
                2: 'The "systemctl start" command immediately starts a service.',
                3: 'The "systemctl enable" command creates symbolic links to enable a service to start automatically at boot.',
                4: 'The "systemctl reload" command reloads the service configuration without stopping the service.',
                5: 'The "systemctl mask" command prevents a service from being started by linking it to /dev/null.',
                6: 'The "--state=failed" option filters the list to show only units that have failed.',
                7: 'The "systemctl list-dependencies" command shows what other units a service depends on.',
                8: 'The "systemctl is-active" command returns "active" or "inactive" status of a service.',
                9: 'The "systemctl restart" command stops and then starts a service, giving it a fresh start.',
                10: 'The "--type=service" option filters the list to show only service units.'
            };
            
            feedbackElement.innerHTML = `
                ✗ Incorrect.
                <div class="correct-answer">
                    <strong>Correct Answer:</strong> ${correctAnswer}<br>
                    <strong>Explanation:</strong> ${explanations[questionNum]}
                </div>
            `;
        }

        function showScenarioAnswer(scenarioNum, correctAnswer) {
            const feedbackElement = document.getElementById(`sfeedback${scenarioNum}`);
            const explanations = {
                1: 'The "--now" flag combines enable and start operations in a single command.',
                2: 'Reload applies configuration changes without stopping the service, maintaining active connections.',
                3: 'Masking completely prevents a service from starting, even if other services try to start it.',
                4: 'The "--state=failed" option shows only services that failed to start or crashed.',
                5: 'The "is-enabled" command checks the boot-time configuration status of a service.'
            };
            
            feedbackElement.innerHTML = `
                ✗ Incorrect.
                <div class="correct-answer">
                    <strong>Correct Answer:</strong> ${correctAnswer}<br>
                    <strong>Explanation:</strong> ${explanations[scenarioNum]}
                </div>
            `;
        }

        function updateScore() {
            document.getElementById('reviewScore').textContent = `${reviewCorrect}/10`;
            document.getElementById('scenarioScore').textContent = `${scenarioCorrect}/5`;
            document.getElementById('totalScore').textContent = `${reviewCorrect + scenarioCorrect}/15`;
        }

        function resetQuiz() {
            // Reset scores
            reviewCorrect = 0;
            scenarioCorrect = 0;
            reviewAttempted.clear();
            scenarioAttempted.clear();
            
            // Clear all inputs
            for (let i = 1; i <= 10; i++) {
                document.getElementById(`q${i}`).value = '';
                document.getElementById(`feedback${i}`).className = 'feedback';
                document.getElementById(`feedback${i}`).style.display = 'none';
            }
            
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`s${i}`).value = '';
                document.getElementById(`sfeedback${i}`).className = 'feedback';
                document.getElementById(`sfeedback${i}`).style.display = 'none';
            }
            
            updateScore();
        }

        // Allow Enter key to submit answers
        document.addEventListener('DOMContentLoaded', function() {
            // Review questions
            for (let i = 1; i <= 10; i++) {
                document.getElementById(`q${i}`).addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const correctAnswers = {
                            1: 'systemctl status',
                            2: 'systemctl start',
                            3: 'systemctl enable',
                            4: 'systemctl reload',
                            5: 'systemctl mask',
                            6: 'systemctl list-units --state=failed',
                            7: 'systemctl list-dependencies',
                            8: 'systemctl is-active',
                            9: 'systemctl restart',
                            10: 'systemctl list-units --type=service'
                        };
                        checkAnswer(i, correctAnswers[i]);
                    }
                });
            }
            
            // Scenario questions
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`s${i}`).addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const correctAnswers = {
                            1: 'systemctl enable --now httpd',
                            2: 'systemctl reload httpd',
                            3: 'systemctl mask bluetooth',
                            4: 'systemctl list-units --state=failed',
                            5: 'systemctl is-enabled sshd'
                        };
                        checkScenario(i, correctAnswers[i]);
                    }
                });
            }
        });
    </script>
</body>
</html>